<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

  <!-- Extend card-body in EncounterSelectionPopup for pet memberships -->
    <t t-name="ths_medical_pos_vet.EncounterSelectionPopup" t-inherit="ths_medical_pos.EncounterSelectionPopup"
       t-inherit-mode="extension">
    <xpath expr="//div[contains(@class, 'card-body')]" position="inside">

      <!-- Display memberships for each pet if available -->
        <t t-if="encounter.pet_memberships">
        <div class="mt-2">
          <small class="text-muted">Memberships:</small>
            <ul class="mb-0 ps-3">
            <t t-foreach="encounter.pet_memberships" t-as="m" t-key="m[0]">
              <li>
                <t t-esc="m[1]"/>:
                  <span class="badge bg-success" t-if="m[2] === 'valid'">Valid</span>
                  <span class="badge bg-danger" t-if="m[2] !== 'valid'">Invalid</span>
              </li>
            </t>
          </ul>
        </div>
      </t>

    </xpath>
  </t>

</templates>
